function e(){var e,t;try{const a=document.documentElement.dataset.theme;return a?"dark"===a:null!==(t=null===(e=window.matchMedia)||void 0===e?void 0:e.call(window,"(prefers-color-scheme: dark)").matches)&&void 0!==t&&t}catch(a){return console.warn("Dark mode detection failed:",a),!1}}const t=(()=>{const e=new Map;let t=null;return a=>(e.set(a,{lastTheme:document.documentElement.dataset.theme}),t||(t=new MutationObserver(t=>{const a=t.find(e=>"data-theme"===e.attributeName);if(!a)return;const n=a.target.dataset.theme;e.forEach((e,t)=>{e.lastTheme!==n&&(t(n,e.lastTheme),e.lastTheme=n)})}),t.observe(document.documentElement,{attributeFilter:["data-theme"],attributes:!0})),()=>{e.delete(a),t&&0===e.size&&(t.disconnect(),t=null)})})();export{e as i,t as o};
