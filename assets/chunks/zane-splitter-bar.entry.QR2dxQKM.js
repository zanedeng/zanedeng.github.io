import{a as t,b as e,c as s,g as i}from"./theme.BxpiuCfN.js";import{s as o,i as n}from"./utils-DF25II1_.CuPkHj24.js";import{n as l}from"./nextFrame-BGGLuZuD.CXhuHsRE.js";import"./uuid-BZTOj-_U.D3oPmf8g.js";import{u as r}from"./useNamespace-HoRSxEcr.Ve2NNMUK.js";import"./framework.N_gL8lMw.js";import"./isObject-Ji6uxU-v.fMJRnWEv.js";import"./isString-DaEH0FEg.BuzQwn6C.js";import"./toObjectString-D4ItlKpz.B_ykxbfz.js";const a=r("splitter-bar"),h=class{constructor(e){t(this,e),this.startPos=null,this.onCollapse=t=>{this.splitterContext.onCollapse(this.index,t),l(()=>{this.startCollapsible=this.getStartCollapsible(),this.endCollapsible=this.getEndCollapsible()})},this.onMousedown=t=>{this.resizable&&(this.startPos=[t.pageX,t.pageY],this.splitterContext.onMoveStart(this.index),window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("mousemove",this.onMouseMove))},this.onMouseMove=t=>{const{pageX:e,pageY:s}=t,i=e-this.startPos[0],o=s-this.startPos[1],n="horizontal"===this.splitterContext.layout?i:o;this.splitterContext.onMoving(this.index,n)},this.onMouseUp=()=>{this.startPos=null,window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),this.splitterContext.onMoveEnd(this.index)},this.onTouchEnd=()=>{this.startPos=null,window.removeEventListener("touchend",this.onTouchEnd),window.removeEventListener("touchmove",this.onTouchMove),this.splitterContext.onMoveEnd(this.index)},this.onTouchMove=t=>{if(1===t.touches.length){t.preventDefault();const e=t.touches[0],s=e.pageX-this.startPos[0],i=e.pageY-this.startPos[1],o="horizontal"===this.splitterContext.layout?s:i;this.splitterContext.onMoving(this.index,o)}},this.onTouchStart=t=>{if(this.resizable&&1===t.touches.length){t.preventDefault();const e=t.touches[0];this.startPos=[e.pageX,e.pageY],this.splitterContext.onMoveStart(this.index),window.addEventListener("touchend",this.onTouchEnd),window.addEventListener("touchmove",this.onTouchMove)}}}get index(){return this.splitterContext.getPanelIndex(this.el.previousElementSibling)}get resizable(){return this.el.previousElementSibling&&"ZANE-SPLITTER-PANEL"===this.el.previousElementSibling.tagName&&this.el.nextElementSibling&&"ZANE-SPLITTER-PANEL"===this.el.nextElementSibling.tagName}get splitterContext(){let t=this.el.parentElement,e=null;for(;t;){if("ZANE-SPLITTER"===t.tagName){e=o.get(t);break}t=t.parentElement}return e}componentDidLoad(){this.startCollapsible=this.getStartCollapsible(),this.endCollapsible=this.getEndCollapsible()}render(){const t=a.e("dragger"),i="horizontal"===this.splitterContext.layout?{width:"0"}:{height:"0"},o={cursor:this.resizable?"horizontal"===this.splitterContext.layout?"ew-resize":"ns-resize":"auto",height:"horizontal"===this.splitterContext.layout?"100%":"16px",touchAction:"none",width:"horizontal"===this.splitterContext.layout?"16px":"100%"};return e(s,{key:"d3740062f9da07e877548e86fae857e5caafb414",class:a.b(),style:i},this.startCollapsible&&e("div",{key:"0531f62b67d776f6a6116554c668b8e5edf43944",class:[a.e("collapse-icon"),a.e(`${this.splitterContext.layout}-collapse-icon-start`)].join(" "),onClick:()=>this.onCollapse("start")},e("slot",{key:"58fc584bc43f9961b1f8c9ae1f24698d17327064",name:"start-collapsible"},this.renderStartIcon())),e("div",{key:"3f55c43b01202985ee59c6bf88eac121ac11ed88",class:{[`${t}-active`]:!!this.startPos,[`${t}-horizontal`]:"horizontal"===this.splitterContext.layout,[`${t}-vertical`]:"horizontal"!==this.splitterContext.layout,[a.e("dragger")]:!0,[a.is("disabled",!this.resizable)]:!0,[a.is("lazy",this.resizable&&this.splitterContext.lazy)]:!0},onMouseDown:this.onMousedown,onTouchStart:this.onTouchStart,style:o}),this.endCollapsible&&e("div",{key:"ea22716a26b6eae81e3d874d3d4e6859c653c7b3",class:[a.e("collapse-icon"),a.e(`${this.splitterContext.layout}-collapse-icon-end`)].join(" "),onClick:()=>this.onCollapse("end")},e("slot",{key:"c83c2dd692215ab2a2f359085b8b893d1879a589",name:"end-collapsible"},this.renderEndIcon())))}getEndCollapsible(){const t=this.splitterContext.panels[this.index],e=this.splitterContext.pxSizes[this.index],s=this.splitterContext.panels[this.index+1],i=this.splitterContext.pxSizes[this.index+1];return n(s,i,t,e)}getStartCollapsible(){const t=this.splitterContext.panels[this.index],e=this.splitterContext.pxSizes[this.index],s=this.splitterContext.panels[this.index+1],i=this.splitterContext.pxSizes[this.index+1];return n(t,e,s,i)}renderEndIcon(){return e("zane-icon",{name:"horizontal"===this.splitterContext.layout?"arrow-right":"arrow-down",size:"12px"})}renderStartIcon(){return e("zane-icon",{name:"horizontal"===this.splitterContext.layout?"arrow-left":"arrow-up",size:"12px"})}get el(){return i(this)}};export{h as zane_splitter_bar};
