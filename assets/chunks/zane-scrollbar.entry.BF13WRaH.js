import{a as e,d as t,b as r,c as i,g as s}from"./theme.BxpiuCfN.js";import{s as a}from"./scrollbar-BkQhOBil.Bj4lMJyn.js";import{n as o}from"./nextFrame-BGGLuZuD.CXhuHsRE.js";import{i as l}from"./isNumber-Bq5rOKx7.D44lQlv1.js";import{a as n}from"./addUnit-eWRTywfV.ISYsoTJY.js";import{n as c}from"./normalizeStyle-CuhDUa4W.BZgKHtUj.js";import{d as h}from"./error-DAO_9P5C.C0uiOAou.js";import"./uuid-BZTOj-_U.D3oPmf8g.js";import{u as d}from"./useNamespace-HoRSxEcr.Ve2NNMUK.js";import"./framework.N_gL8lMw.js";import"./toObjectString-D4ItlKpz.B_ykxbfz.js";import"./isString-DaEH0FEg.BuzQwn6C.js";function p(e,t){if(!e||"undefined"==typeof ResizeObserver)return()=>{};const r=function(e){let t=null;const r=new Set;return"undefined"!=typeof ResizeObserver&&(t=new ResizeObserver(e)),{disconnect(){t&&(t.disconnect(),r.clear(),this.isObserving=!1)},isObserving:!1,observe(e){t&&e&&!r.has(e)&&(t.observe(e),r.add(e),this.isObserving=!0)},observer:t,unobserve(e){t&&e&&r.has(e)&&(t.unobserve(e),r.delete(e),0===r.size&&(this.isObserving=!1))}}}(e=>{e.forEach(e=>{t(e)})});return r.observe(e),()=>{r.disconnect()}}class b{}const f=d("scrollbar"),v="zane-scrollbar",u={bottom:"top",left:"right",right:"left",top:"bottom"},z=class{constructor(r){e(this,r),this.endReachedEvent=t(this,"end-reached",7),this.scrollEvent=t(this,"zScroll",7),this.distance=0,this.distanceScrollState={bottom:!1,left:!1,right:!1,top:!1},this.height="",this.maxHeight="",this.minSize=20,this.tag="div",this.viewClass="",this.viewStyle={},this.wrapClass="",this.wrapStyle={},this.context=new b,this.direction="right",this.stopResizeListener=void 0,this.stopResizeObserver=void 0,this.stopWrapResizeObserver=void 0,this.wrapScrollLeft=0,this.wrapScrollTop=0,this.onScrollHandler=()=>{this.handleScroll()},this.onSizeChangeHandler=()=>{this.update()},this.shouldSkipDirection=e=>{var t;return null!==(t=this.distanceScrollState[e])&&void 0!==t&&t},this.updateTriggerStatus=e=>{const t=u[this.direction];if(!t)return;const r=e[this.direction],i=e[t];r&&!this.distanceScrollState[this.direction]&&(this.distanceScrollState[this.direction]=!0),!i&&this.distanceScrollState[t]&&(this.distanceScrollState[t]=!1)}}componentDidLoad(){this.context.wrapElement=this.wrapRef,this.watchNoresizeHandler(),this.native||o(()=>{this.update()})}componentDidUpdate(){this.update()}componentWillLoad(){this.context.scrollbarElement=this.el,a.set(this.el,this.context)}async handleScroll(){var e;if(this.wrapRef){null===(e=this.barRef)||void 0===e||e.handleScroll(this.wrapRef);const t=this.wrapScrollTop,r=this.wrapScrollLeft;this.wrapScrollTop=this.wrapRef.scrollTop,this.wrapScrollLeft=this.wrapRef.scrollLeft;const i={bottom:this.wrapScrollTop+this.wrapRef.clientHeight>=this.wrapRef.scrollHeight-this.distance,left:this.wrapScrollLeft<=this.distance&&0!==r,right:this.wrapScrollLeft+this.wrapRef.clientWidth>=this.wrapRef.scrollWidth-this.distance&&r!==this.wrapScrollLeft,top:this.wrapScrollTop<=this.distance&&0!==t};if(this.scrollEvent.emit({scrollLeft:this.wrapScrollLeft,scrollTop:this.wrapScrollTop}),t!==this.wrapScrollTop&&(this.direction=this.wrapScrollTop>t?"bottom":"top"),r!==this.wrapScrollLeft&&(this.direction=this.wrapScrollLeft>r?"right":"left"),this.distance>0){if(this.shouldSkipDirection(this.direction))return;this.updateTriggerStatus(i)}i[this.direction]&&this.endReachedEvent.emit(this.direction)}}render(){const e=[this.wrapClass,f.e("wrap"),!this.native&&f.em("wrap","hidden-default")].join(" "),t=[f.e("view"),this.viewClass].join(" "),s=c(this.wrapStyle);return this.height&&(s.height=n(this.height)),this.maxHeight&&(s.maxHeight=n(this.maxHeight)),r(i,{key:"f6bbfe1896623897ca691e8e8ffdd0ddc7d4e034",class:f.b()},r("div",{key:"c8c12eb40e20e9c883f9a50d359cd263731d19fb",class:e,onScroll:this.onScrollHandler,ref:e=>this.wrapRef=e,style:s,tabindex:this.el.tabIndex},r("div",{key:"29034af042633e572399e36fb0e1f042a4125ad6",class:t,id:this.el.id,ref:e=>this.resizeRef=e,role:this.role,style:this.viewStyle},r("slot",{key:"e6d68794cb2944b3748d5bbabae3d09c983286bd"}))),r("zane-bar",{key:"0ffa1e42753ec1c13c647c5faf5d3a8af36a9336",always:this.always,"min-size":this.minSize,ref:e=>this.barRef=e}))}async scrollToCoord(e,t){this.wrapRef.scrollTo(e,t)}async setScrollLeft(e){l(e)?this.wrapRef.scrollLeft=e:h(v,"value must be a number")}async setScrollTop(e){l(e)?this.wrapRef.scrollTop=e:h(v,"value must be a number")}async update(){var e;null===(e=this.barRef)||void 0===e||e.update(),this.distanceScrollState[this.direction]=!1}watchHeightHandler(){this.native||o(()=>{var e;this.update(),this.wrapRef&&(null===(e=this.barRef)||void 0===e||e.handleScroll(this.wrapRef))})}watchNoresizeHandler(){var e,t,r;if(this.noresize)null===(e=this.stopResizeListener)||void 0===e||e.call(this),null===(t=this.stopResizeObserver)||void 0===t||t.call(this),null===(r=this.stopWrapResizeObserver)||void 0===r||r.call(this);else{this.stopResizeObserver=p(this.resizeRef,this.onSizeChangeHandler),this.stopWrapResizeObserver=p(this.wrapRef,this.onSizeChangeHandler);const{disconnect:e}=function(e,t,r,i={}){const{capture:s=!1,enabled:a=!0,once:o=!1,passive:l=!1}=i;let n=!1,c=null;const h=()=>{if(n)return;const i="function"==typeof e?e():e;if(!i||!a)return;c=i;const h={capture:s,once:o,passive:l};i.addEventListener(t,r,h),n=!0},d=()=>{if(!n||!c)return;const e={capture:s,once:o,passive:l};c.removeEventListener(t,r,e),n=!1,c=null};return a&&h(),{disconnect:d,get isConnected(){return n},reconnect:()=>{d(),h()}}}(document,"resize",this.onSizeChangeHandler);this.stopResizeListener=e}}get el(){return s(this)}static get watchers(){return{maxHeight:[{watchHeightHandler:0}],height:[{watchHeightHandler:0}],noresize:[{watchNoresizeHandler:0}]}}};z.style=".zane-scrollbar{--zane-scrollbar-opacity:0.3;--zane-scrollbar-bg-color:var(--zane-text-color-secondary);--zane-scrollbar-hover-opacity:0.5;--zane-scrollbar-hover-bg-color:var(--zane-text-color-secondary)}.zane-scrollbar{display:block;overflow:hidden;position:relative;height:100%}.zane-scrollbar .zane-scrollbar__wrap{overflow:auto;height:100%}.zane-scrollbar .zane-scrollbar__wrap--hidden-default{scrollbar-width:none}.zane-scrollbar .zane-scrollbar__wrap--hidden-default::-webkit-scrollbar{display:none}.zane-scrollbar .zane-scrollbar__thumb{position:relative;display:block;width:0;height:0;cursor:pointer;border-radius:inherit;background-color:var(--zane-scrollbar-bg-color, var(--zane-text-color-secondary));transition:var(--zane-transition-duration) background-color;opacity:var(--zane-scrollbar-opacity, 0.3)}.zane-scrollbar .zane-scrollbar__thumb:hover{background-color:var(--zane-scrollbar-hover-bg-color, var(--zane-text-color-secondary));opacity:var(--zane-scrollbar-hover-opacity, 0.5)}.zane-scrollbar .zane-scrollbar__bar{position:absolute;right:2px;bottom:2px;z-index:1;border-radius:4px}.zane-scrollbar .zane-scrollbar__bar.is-vertical{width:6px;top:2px}.zane-scrollbar .zane-scrollbar__bar.is-vertical>div{width:100%}.zane-scrollbar .zane-scrollbar__bar.is-horizontal{height:6px;left:2px}.zane-scrollbar .zane-scrollbar__bar.is-horizontal>div{height:100%}.zane-scrollbar-fade-enter-active{transition:opacity 340ms ease-out}.zane-scrollbar-fade-leave-active{transition:opacity 120ms ease-out}.zane-scrollbar-fade-enter-from,.zane-scrollbar-fade-leave-active{opacity:0}";export{z as zane_scrollbar};
