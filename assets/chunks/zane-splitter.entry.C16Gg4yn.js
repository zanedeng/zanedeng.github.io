import{a as e,d as t,b as i,c as s,g as a}from"./theme.BxpiuCfN.js";import{s as n,a as r,g as l,b as o,c as h}from"./utils-DF25II1_.CuPkHj24.js";import{b as p}from"./uuid-BZTOj-_U.D3oPmf8g.js";import{u as d}from"./useNamespace-HoRSxEcr.Ve2NNMUK.js";import{n as c}from"./nextFrame-BGGLuZuD.CXhuHsRE.js";import"./framework.N_gL8lMw.js";import"./isObject-Ji6uxU-v.fMJRnWEv.js";import"./isString-DaEH0FEg.BuzQwn6C.js";import"./toObjectString-D4ItlKpz.B_ykxbfz.js";class z{get containerSize(){var e,t,i,s;return"horizontal"===this.layout?null!==(t=null===(e=this.containerEl)||void 0===e?void 0:e.offsetWidth)&&void 0!==t?t:0:null!==(s=null===(i=this.containerEl)||void 0===i?void 0:i.offsetHeight)&&void 0!==s?s:0}get layout(){return this._layout}set layout(e){this._layout=e,this.updatePercentSizes()}get lazy(){return this._lazy}set lazy(e){this._lazy=e}get lazyOffset(){return this._lazyOffset}set lazyOffset(e){var t;this._lazyOffset!==e&&(this._lazyOffset=e,null===(t=this._lazyOffsetChangeListeners)||void 0===t||t.forEach(t=>t(e)))}get limitSizes(){return this.panels.map(e=>[e.min,e.max])}get movingIndex(){return this._movingIndex}set movingIndex(e){var t;this._movingIndex!==e&&(this._movingIndex=e,null===(t=this._movingIndexChangeListeners)||void 0===t||t.forEach(t=>t(e)))}get panels(){return this._panels}get percentSizes(){return this._percentSizes}set percentSizes(e){var t;this._percentSizes=e,null===(t=this._percentSizesChangeListeners)||void 0===t||t.forEach(e=>e())}get pxSizes(){return this._percentSizes.map(e=>this.ptg2px(e))}get uuid(){return this._uuid}constructor(){this._cacheCollapsedSize=[],this._lazy=!1,this._lazyOffset=0,this._lazyOffsetChangeListeners=[],this._movingIndex=null,this._movingIndexChangeListeners=[],this._panels=[],this._percentSizes=[],this._percentSizesChangeListeners=[],this._planeIndexMap=new Map,this.addLazyOffsetChangeListener=e=>{this._lazyOffsetChangeListeners.push(e)},this.addMovingIndexChangeListener=e=>{this._movingIndexChangeListeners.push(e)},this.addPercentSizesChangeListener=e=>{this._percentSizesChangeListeners.push(e)},this.clearPanel=()=>{this._panels=[]},this.getPanelIndex=e=>this._planeIndexMap.get(e),this.onCollapse=(e,t)=>{var i;const s=this._percentSizes.map(e=>this.ptg2px(e));this._cacheCollapsedSize.length||this._cacheCollapsedSize.push(...s);const a="start"===t?e:e+1,n="start"===t?e+1:e,r=s[a],l=s[n];if(0!==r&&0!==l)s[a]=0,s[n]+=r,this._cacheCollapsedSize[e]=r;else{const t=r+l,i=this._cacheCollapsedSize[e],o=t-i;s[n]=i,s[a]=o}this.panels.forEach((e,t)=>{e.size=s[t]}),null===(i=this.onCollapseCallback)||void 0===i||i.call(this,e,t),c(()=>{this.updatePercentSizes()})},this.onMoveEnd=e=>{this.lazy&&this._updatePanelSizes(),this.lazyOffset=0,this.movingIndex=null,this._cachePxSizes=[],c(()=>{var t;null===(t=this.onMoveEndCallback)||void 0===t||t.call(this,e),this.updatePercentSizes()})},this.onMoveStart=e=>{var t;this.lazyOffset=0,this.movingIndex={confirmed:!1,index:e},this._cachePxSizes=this._percentSizes.map(e=>this.ptg2px(e)),null===(t=this.onMoveStartCallback)||void 0===t||t.call(this,e)},this.onMoving=(e,t)=>{var i,s,a;let n=null;if(!(this.movingIndex&&this.movingIndex.confirmed||0===t))if(t>0)n=e,this.movingIndex={confirmed:!0,index:e};else for(let g=e;g>=0;g-=1)if(this._cachePxSizes[g]>0){n=g,this.movingIndex={confirmed:!0,index:g};break}const r=null!==(s=null!=n?n:null===(i=this.movingIndex)||void 0===i?void 0:i.index)&&void 0!==s?s:e,l=[...this._cachePxSizes],o=r+1,h=this.getLimitSize(this.limitSizes[r][0],0),p=this.getLimitSize(this.limitSizes[o][0],0),d=this.getLimitSize(this.limitSizes[r][1],this.containerSize||0),c=this.getLimitSize(this.limitSizes[o][1],this.containerSize||0);let z=t;l[r]+z<h&&(z=h-l[r]),l[o]-z<p&&(z=l[o]-p),l[r]+z>d&&(z=d-l[r]),l[o]-z>c&&(z=l[o]-c),l[r]+=z,l[o]-=z,this.lazyOffset=z,this._updatePanelSizes=()=>{this.panels.forEach((e,t)=>{e.size=l[t]}),this._updatePanelSizes=()=>{}},this.lazy?null===(a=this.onMovingCallback)||void 0===a||a.call(this,e):this._updatePanelSizes()},this.registerPanel=e=>{this._panels.push(e),this.sortPanels(),this._planeIndexMap.clear(),this._panels.forEach((e,t)=>{this._planeIndexMap.set(e.el,t)}),this.updatePercentSizes()},this.removeLazyOffsetChangeListener=e=>{var t,i;const s=null===(t=this._lazyOffsetChangeListeners)||void 0===t?void 0:t.indexOf(e);-1!==s&&(null===(i=this._lazyOffsetChangeListeners)||void 0===i||i.splice(s,1))},this.removeMovingIndexChangeListener=e=>{var t,i;const s=null===(t=this._movingIndexChangeListeners)||void 0===t?void 0:t.indexOf(e);-1!==s&&(null===(i=this._movingIndexChangeListeners)||void 0===i||i.splice(s,1))},this.removePercentSizesChangeListener=e=>{var t,i;const s=null===(t=this._percentSizesChangeListeners)||void 0===t?void 0:t.indexOf(e);-1!==s&&(null===(i=this._percentSizesChangeListeners)||void 0===i||i.splice(s,1))},this.sortPanels=()=>{const e=Array.from(this.containerEl.children).filter(e=>"ZANE-SPLITTER-PANEL"===e.tagName).map(e=>e.uuid),t=new Map;e.forEach((e,i)=>{t.set(e,i)}),this._panels.sort((e,i)=>{const s=t.get(e.uuid),a=t.get(i.uuid);return void 0!==s&&void 0!==a?s-a:void 0!==s?-1:void 0!==a?1:0})},this.unregisterPanel=e=>{this._panels.splice(this._panels.indexOf(e),1),this._planeIndexMap.clear(),this._panels.forEach((e,t)=>{this._planeIndexMap.set(e.el,t)}),this.updatePercentSizes()},this._updatePanelSizes=()=>{},this.getLimitSize=(e,t)=>r(e)?this.ptg2px(l(e)):o(e)?h(e):null!=e?e:t,this.ptg2px=e=>e*this.containerSize,this.updatePercentSizes=()=>{var e;let t=[],i=0;for(let a=0;a<this.panels.length;a+=1){const s=null===(e=this.panels[a])||void 0===e?void 0:e.size;if(r(s))t[a]=l(s);else if(o(s))t[a]=h(s)/this.containerSize;else if(s||0===s){const e=Number(s);Number.isNaN(e)||(t[a]=e/this.containerSize)}else i+=1,t[a]=void 0}const s=t.reduce((e,t)=>e+(t||0),0);if(s>1||!i){const e=1/s;t=t.map(t=>void 0===t?0:t*e)}else{const e=(1-s)/i;t=t.map(t=>void 0===t?e:t)}this.percentSizes=t},this._uuid=p()}}const g=d("splitter"),f=class{constructor(i){e(this,i),this.collapseEvent=t(this,"collapse",7),this.resizeEndEvent=t(this,"zResizeEnd",7),this.resizeEvent=t(this,"zResize",7),this.resizeStartEvent=t(this,"zResizeStart",7),this.layout="horizontal",this.lazy=!1,this.lazyOffset=0,this.movingIndex=null,this.lazyOffsetUpdate=e=>{this.lazyOffset=e},this.movingIndexUpdate=e=>{this.movingIndex=e}}componentDidLoad(){}componentWillLoad(){this.rootContext=new z,this.rootContext.containerEl=this.el,this.rootContext.layout=this.layout,this.rootContext.lazy=this.lazy,this.rootContext.onMoveStartCallback=e=>{this.resizeStartEvent.emit({index:e})},this.rootContext.onMovingCallback=e=>{this.resizeEvent.emit({index:e})},this.rootContext.onMoveEndCallback=e=>{this.resizeEndEvent.emit({index:e})},this.rootContext.onCollapseCallback=(e,t)=>{this.collapseEvent.emit({index:e,type:t})},this.rootContext.addLazyOffsetChangeListener(this.lazyOffsetUpdate),this.rootContext.addMovingIndexChangeListener(this.movingIndexUpdate),n.set(this.el,this.rootContext)}disconnectedCallback(){this.rootContext=null,n.delete(this.el)}handleLayoutChange(){this.rootContext.layout=this.layout}handleLazyChange(){if(this.rootContext.lazy=this.lazy,this.lazyOffset){const e=new MouseEvent("mouseup",{bubbles:!0});window.dispatchEvent(e)}}render(){const e={[g.cssVarBlockName("bar-offset")]:this.lazy?`${this.lazyOffset}px`:void 0};return i(s,{key:"75149a66180b5169fc8f622dfe00d23071eee1ae",class:[g.b(),g.e(this.layout)].join(" "),style:e},i("slot",{key:"d5876da316acb62a7686e11871643809eb28e582"}),this.movingIndex&&i("div",{key:"d904b16e57318ec41807b1ca89c09f6cc122c811",class:[g.e("mask"),g.e(`mask-${this.layout}`)].join(" ")}))}get el(){return a(this)}static get watchers(){return{layout:[{handleLayoutChange:0}],lazy:[{handleLazyChange:0}]}}};f.style='.zane-splitter{position:relative;display:flex;height:100%;width:100%;margin:0;padding:0}.zane-splitter .zane-splitter__mask{position:absolute;z-index:999;left:0;right:0;top:0;bottom:0}.zane-splitter .zane-splitter__mask-horizontal{cursor:ew-resize}.zane-splitter .zane-splitter__mask-vertical{cursor:ns-resize}.zane-splitter.zane-splitter__horizontal{flex-direction:row}.zane-splitter.zane-splitter__vertical{flex-direction:column}.zane-splitter-bar{flex:none;position:relative;user-select:none}.zane-splitter-bar .zane-splitter-bar__dragger{z-index:1;position:absolute;background:transparent;top:50%;left:50%;transform:translate(-50%, -50%)}.zane-splitter-bar .zane-splitter-bar__dragger::before,.zane-splitter-bar .zane-splitter-bar__dragger::after{content:"";position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);background-color:var(--zane-border-color-light)}.zane-splitter-bar .zane-splitter-bar__dragger:not(.is-lazy)::after{display:none}.zane-splitter-bar .zane-splitter-bar__dragger::after{opacity:0.4}.zane-splitter-bar .zane-splitter-bar__dragger:hover:not(.is-disabled)::before{background-color:var(--zane-color-primary-light-5)}.zane-splitter-bar .zane-splitter-bar__dragger-horizontal::before,.zane-splitter-bar .zane-splitter-bar__dragger-horizontal::after{height:100%;width:2px}.zane-splitter-bar .zane-splitter-bar__dragger-vertical::before,.zane-splitter-bar .zane-splitter-bar__dragger-vertical::after{height:2px;width:100%}.zane-splitter-bar .zane-splitter-bar__dragger-active::before,.zane-splitter-bar .zane-splitter-bar__dragger-active::after{background-color:var(--zane-color-primary-light-3)}.zane-splitter-bar .zane-splitter-bar__dragger-active.zane-splitter-bar__dragger-horizontal::after{transform:translate(calc(-50% + var(--zane-splitter-bar-offset)), -50%)}.zane-splitter-bar .zane-splitter-bar__dragger-active.zane-splitter-bar__dragger-vertical::after{transform:translate(-50%, calc(-50% + var(--zane-splitter-bar-offset)))}.zane-splitter-bar:hover .zane-splitter-bar__collapse-icon{opacity:1}.zane-splitter-bar .zane-splitter-bar__collapse-icon{display:flex;align-items:center;justify-content:center;position:absolute;background:var(--zane-border-color-light);border-radius:2px;cursor:pointer;opacity:0;z-index:9}.zane-splitter-bar .zane-splitter-bar__collapse-icon:hover{opacity:1;background-color:var(--zane-color-primary-light-5)}.zane-splitter-bar .zane-splitter-bar__horizontal-collapse-icon-start{left:-12px;top:50%;height:24px;width:16px;transform:translate(-50%, -50%)}.zane-splitter-bar .zane-splitter-bar__horizontal-collapse-icon-end{left:12px;top:50%;height:24px;width:16px;transform:translate(-50%, -50%)}.zane-splitter-bar .zane-splitter-bar__vertical-collapse-icon-start{top:-12px;right:50%;height:16px;width:24px;transform:translate(50%, -50%)}.zane-splitter-bar .zane-splitter-bar__vertical-collapse-icon-end{top:12px;right:50%;height:16px;width:24px;transform:translate(50%, -50%)}';export{f as zane_splitter};
